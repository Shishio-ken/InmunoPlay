<main class="main-content">
  <h1>Editar Pregunta</h1>
  <p>Aquí puedes modificar la pregunta y sus opciones:</p>

  <div class="info-box">
    <form action="/links/edit/{{pregunta.id}}" method="POST" id="preguntaForm">
      <!-- Enunciado -->
      <div class="form-group mb-3">
        <label for="enunciado">Pregunta:</label>
        <input
          type="text"
          class="form-control"
          name="enunciado"
          placeholder="Escribe la pregunta"
          value="{{pregunta.enunciado}}"
          required>
      </div>

      <!-- Opciones -->
      <div id="opcionesContainer">
        {{#each opciones}}
          <div class="form-group mb-4">
            <label>Opción {{inc @index}}:</label>
            <input
              type="text"
              class="form-control mb-2"
              name="opciones[]"
              value="{{texto_opcion}}"
              required>
            
            <div class="form-check mb-2">
              <input
                class="form-check-input"
                type="radio"
                name="opcion_correcta"
                value="{{@index}}"
                id="correcta-{{@index}}"
                {{#if es_correcta}}checked{{/if}}>
              <label class="form-check-label" for="correcta-{{@index}}">
                Esta es la correcta
              </label>
            </div>

            <!-- NUEVO campo de retroalimentación -->
            <label for="retro-{{@index}}" class="form-label">Retroalimentación:</label>
            <textarea
              id="retro-{{@index}}"
              class="form-control"
              name="retroalimentaciones[]"
              rows="2"
              placeholder="Escribe aquí la retroalimentación para esta opción (opcional)">{{retroalimentacion}}</textarea>
          </div>
        {{/each}}
      </div>

      <!-- Botones -->
      <button type="submit" class="primary-btn">Actualizar Pregunta</button>
      <a href="/links/add" class="primary-btn" style="background: #999;">Cancelar</a>
    </form>
  </div>
</main>
