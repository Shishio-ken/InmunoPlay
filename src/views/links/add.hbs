<main class="main-content">
  <h1>Administrar Preguntas</h1>
  <p>Desde aquí puedes crear nuevas preguntas con sus opciones:</p>

  <!-- Formulario de nueva pregunta -->
  <div class="info-box">
    <h2>Nueva Pregunta</h2>
    <form action="/links/add" method="POST" id="preguntaForm">
      <div class="form-group mb-3">
        <label for="enunciado">Pregunta:</label>
        <input type="text" class="form-control" name="enunciado"
               placeholder="Escribe la pregunta">
      </div>

      <div class="form-group mb-3">
        <label for="cantidad">Número de respuestas:</label>
        <select id="cantidad" class="form-control" name="cantidad">
          <option value="">Selecciona</option>
          <option value="2">2</option>
          <option value="3">3</option>
          <option value="4">4</option>
        </select>
      </div>

      <div id="opcionesContainer" class="mb-3"></div>

      <button type="submit" class="primary-btn">Guardar Pregunta</button>
    </form>
  </div>

  <!-- Listado de preguntas -->
  <h2 class="my-4 text-center">Preguntas Registradas</h2>

  <div class="questions-list">
    {{#each preguntas}}
      <div class="question-card">
        <div class="question-header">
          <div class="question-text">{{this.enunciado}}</div>
          <div class="question-actions">
            <a href="/links/edit/{{this.id}}" class="action-btn">Editar</a>
            <form action="/links/delete/{{this.id}}" method="POST" style="display:inline">
              <button type="submit" class="action-btn delete"
                      onclick="return confirm('¿Eliminar esta pregunta?')">
                Eliminar
              </button>
            </form>
          </div>
        </div>
        <div class="options-list">
          {{#each this.opciones}}
            <div class="option-item {{#if es_correcta}}correct{{/if}}">
              {{texto_opcion}}
            </div>
            {{#if retroalimentacion}}
              <div class="option-feedback">
                <strong>Retroalimentación:</strong> {{retroalimentacion}}
              </div>
            {{/if}}
          {{/each}}
        </div>
      </div>
    {{else}}
      <div class="alert alert-warning text-center">
        No hay preguntas aún.
      </div>
    {{/each}}
  </div>
</main>

<script src="/js/preguntas.js"></script>
